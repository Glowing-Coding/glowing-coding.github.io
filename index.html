<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Glowing Minecraft 3D Multiplayer</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      overflow: hidden;
      background: #222;
    }
    #gameCanvas {
      display: block;
      width: 100vw;
      height: 100vh;
      outline: none;
      background: #555;
    }
    #authMessage {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -40%);
      color: #fff;
      background: #23272e;
      border: 2px solid #55aaff;
      border-radius: 10px;
      padding: 30px;
      font-size: 1.3em;
      text-align: center;
      z-index: 10;
      display: none;
    }
  </style>
</head>
<body>
  <div id="authMessage">Authenticating...</div>
  <canvas id="gameCanvas" tabindex="0"></canvas>

  <!-- Your Firebase initialization as per instructions (must be before any Firebase services) -->
  <script type="module">
    console.log("Initializing Firebase app...");
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
    const firebaseConfig = {
      apiKey: "AIzaSyA2jQMtZLgvyB7P1EsB1rqv4fdzcniQq-Y",
      authDomain: "glowing-gaming.firebaseapp.com",
      projectId: "glowing-gaming",
      storageBucket: "glowing-gaming.firebasestorage.app",
      messagingSenderId: "962196600930",
      appId: "1:962196600930:web:64f0e1228e6ab66853793b",
      measurementId: "G-4Q14J89E6T"
    };
    console.log("Firebase config:", firebaseConfig);
    const app = initializeApp(firebaseConfig);
    console.log("Firebase app initialized.", app);
    const analytics = getAnalytics(app);
    console.log("Firebase analytics initialized.", analytics);

    // Auth check
    const auth = getAuth();
    const authMessage = document.getElementById('authMessage');
    const gameCanvas = document.getElementById('gameCanvas');
    authMessage.style.display = 'block';
    authMessage.textContent = 'Authenticating...';
    gameCanvas.style.display = 'none';

    onAuthStateChanged(auth, (user) => {
      if (user) {
        // User is signed in
        authMessage.style.display = 'none';
        gameCanvas.style.display = 'block';
        console.log('User is logged in:', user);
      } else {
        // Not signed in
        authMessage.style.display = 'block';
        authMessage.textContent = 'You need to login to play.';
        gameCanvas.style.display = 'none';
        console.log('User is not logged in.');
      }
    });
  </script>

  <script type="module" src="main.js"></script>
</body>
</html>
